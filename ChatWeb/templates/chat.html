<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Magical ChatApp</title>
  <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
</head>
<body>

  <!-- Auth Section -->
  <section id="auth-section">
    <div id="loginFormWrapper">
      <h2>Login</h2>
      <form id="loginForm">
        <input type="text" id="loginUser" placeholder="Username" required>
        <input type="password" id="loginPass" placeholder="Password" required>
        <button type="submit">Login</button>
        <p><a href="#" id="showRegister">Don't have an account? Register</a></p>
        <p><a href="#" id="forgotPassLink">Forgot Password?</a></p>
      </form>
    </div>

    <div id="registerFormWrapper" class="hidden">
      <h2>Register</h2>
      <form id="registerForm">
        <input type="text" id="regUser" placeholder="Username" required>
        <input type="password" id="regPass" placeholder="Password" required>
        <input type="text" id="regName" placeholder="Full Name" required>
        <input type="number" id="regAge" placeholder="Age" required>
        <input type="email" id="regEmail" placeholder="Email" required>
        <select id="regGender">
          <option value="">Select Gender</option>
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="other">Other</option>
        </select>
        <button type="submit">Create Account</button>
        <p><a href="#" id="showLogin">Already have an account? Login</a></p>
      </form>
    </div>
  </section>

  <!-- Forgot Password Modal -->
  <div id="forgotPassModal" class="hidden">
    <h3>Reset Password</h3>
    <form id="forgotForm">
      <input type="text" id="forgotUser" placeholder="Enter Username/Email" required>
      <button type="submit">Send Reset Link</button>
    </form>
  </div>

  <!-- Dashboard -->
  <section id="dashboard" class="hidden">
    <header>
      <div id="currentUser"></div>
      <button id="logoutBtn">Logout</button>
    </header>
    <div id="roomsList">
      <h3>Available Rooms</h3>
      <ul id="roomCards"></ul>
    </div>
    <div id="room-section">
      <h3>Join Room</h3>
      <form id="roomForm">
        <input type="text" id="room" placeholder="Room Name">
        <input type="password" id="roomPassword" placeholder="Room Password">
        <button type="submit" id="joinRoomBtn">Join Room</button>
      </form>
    </div>
    <div id="create-room-section">
      <h3>Create Room</h3>
      <form id="createRoomForm">
        <input type="text" id="newRoomName" placeholder="New Room Name" required>
        <input type="password" id="newRoomPassword" placeholder="Room Password (optional)">
        <label><input type="checkbox" id="isPrivate"> Private Room</label>
        <button type="submit">Create Room</button>
      </form>
    </div>
  </section>

  <!-- Profile Page -->
  <section id="profile-section" class="hidden">
    <h2>Profile</h2>
    <form id="profileForm">
      <input type="text" id="displayName" placeholder="Display Name">
      <input type="text" id="avatarUrl" placeholder="Avatar URL">
      <input type="email" id="profileEmail" placeholder="Email">
      <button type="submit">Update Profile</button>
    </form>
  </section>

  <!-- Chat Section -->
  <section id="chat-section" class="hidden">
    <header>
      <div id="currentRoom">Current Room: Lobby</div>
      <button id="exitRoomBtn">Exit Room</button>
    </header>
    <main>
      <div id="messages"></div>
      <div id="dmSection" class="hidden">
        <h3>Direct Messages</h3>
        <div id="dmMessages"></div>
      </div>
    </main>
    <aside>
      <h3>Online Users</h3>
      <ul id="users"></ul>
    </aside>
    <footer>
      <input type="text" id="recipient" placeholder="Recipient (for DM)">
      <input type="text" id="input" placeholder="Type your message...">
      <button id="send">Send</button>
      <button id="dmToggle">ðŸ’¬ Toggle DM</button>
    </footer>
  </section>
  <div id="fairyParticles">
  <div class="particle" style="left:10%; animation-delay:0s;"></div>
  <div class="particle" style="left:30%; animation-delay:2s;"></div>
  <div class="particle" style="left:50%; animation-delay:4s;"></div>
  <div class="particle" style="left:70%; animation-delay:6s;"></div>
  <div class="particle" style="left:90%; animation-delay:8s;"></div>
</div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <script src="{{url_for('static', filename='chat.js')}}"></script>
</body>
</html>